<%- include('./partials/header.ejs') %> 
<%- include('./partials/nav.ejs') %>
<%- include('./partials/style.ejs') %>

<div class="container mt-5 flex-grow-1">
  <div class="row justify-content-center">
    <div class="col-md-11"> 
      
      <div class="converter-card mx-auto">
        
        <h1 class="mb-4"><%= title %></h1>

        <% if (posts.length > 0) { %>
          <div class="table-responsive">
            <table class="table table-dark table-striped table-hover align-middle">
              <thead>
                <tr>
                  <th scope="col">Title</th>
                  <th scope="col" style="width: 35%;">Description</th>
                  <th scope="col">Author</th>
                  <th scope="col" class="text-center">Actions</th>
                </tr>
              </thead>
              <tbody>
                <% for (let post of posts) { %>
                  <tr>
                    <td class="fw-bold"><%= post.title %></td>
                    
                    <td><%= post.description %></td>
                    
                    <td><small class="text-white-50"><%= post.author %></small></td>
                    
                    <td class="text-center">
                      <div class="d-flex justify-content-center gap-2">
                        
                        <a href="/edit-post/<%= post.id %>?edit=true" class="btn btn-sm btn-outline-warning">
                          Edit
                        </a>

                        <form action="/delete-post" method="POST" onsubmit="return confirm('Are you sure you want to delete this post?');">
                          <input type="hidden" value="<%= post.id %>" name="postId">
                          <button type="submit" class="btn btn-sm btn-outline-danger">
                            Delete
                          </button>
                        </form>
                        
                      </div>
                    </td>
                  </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        <% } else { %>
          
          <div class="alert alert-info text-center" role="alert">
            <h4 class="alert-heading">There are no posts yet!</h4>
            <p>Click "Add Post" in the menu to create your first entry.</p>
          </div>
          
        <% } %>

      </div> </div>
  </div>
</div>

<%- include('./partials/footer.ejs') %>